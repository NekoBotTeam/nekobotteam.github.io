import{_ as a,c as i,o as t,az as l}from"./chunks/framework.OpiqYVxT.js";const E=JSON.parse('{"title":"平台对接","description":"","frontmatter":{},"headers":[],"relativePath":"guide/platforms.md","filePath":"guide/platforms.md","lastUpdated":1767020854000}'),h={name:"guide/platforms.md"};function n(e,s,p,k,o,r){return t(),i("div",null,[...s[0]||(s[0]=[l(`<h1 id="平台对接" tabindex="-1">平台对接 <a class="header-anchor" href="#平台对接" aria-label="Permalink to &quot;平台对接&quot;">​</a></h1><p>NekoBot 支持多个聊天平台，通过统一的平台适配器接口实现跨平台消息处理。</p><h2 id="支持的平台" tabindex="-1">支持的平台 <a class="header-anchor" href="#支持的平台" aria-label="Permalink to &quot;支持的平台&quot;">​</a></h2><table tabindex="0"><thead><tr><th>平台</th><th>状态</th><th>协议</th></tr></thead><tbody><tr><td>QQ</td><td>✅</td><td>OneBot V11 (AIOCQHTTP)</td></tr><tr><td>Discord</td><td>✅</td><td>Discord Bot API</td></tr><tr><td>Telegram</td><td>✅</td><td>Telegram Bot API</td></tr></tbody></table><h2 id="快速开始" tabindex="-1">快速开始 <a class="header-anchor" href="#快速开始" aria-label="Permalink to &quot;快速开始&quot;">​</a></h2><p>选择一个平台开始配置：</p><ul><li><a href="./platforms/qq.html">QQ</a> - 使用 NapCatQQ 对接 QQ</li><li><a href="./platforms/discord.html">Discord</a> - 使用 Discord Bot API</li><li><a href="./platforms/telegram.html">Telegram</a> - 使用 Telegram Bot API</li></ul><h2 id="平台配置" tabindex="-1">平台配置 <a class="header-anchor" href="#平台配置" aria-label="Permalink to &quot;平台配置&quot;">​</a></h2><h3 id="添加平台" tabindex="-1">添加平台 <a class="header-anchor" href="#添加平台" aria-label="Permalink to &quot;添加平台&quot;">​</a></h3><p>在 Web 仪表盘中添加平台：</p><ol><li>进入&quot;平台&quot;页面</li><li>点击&quot;添加平台&quot;</li><li>选择平台类型并填写配置</li><li>保存并启用平台</li></ol><h3 id="通过配置文件添加" tabindex="-1">通过配置文件添加 <a class="header-anchor" href="#通过配置文件添加" aria-label="Permalink to &quot;通过配置文件添加&quot;">​</a></h3><p>编辑 <code>data/platforms_sources.json</code>：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;aiocqhttp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;aiocqhttp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;enable&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;aiocqhttp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;NekoBot&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;ws_host&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0.0.0.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;ws_port&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6299</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;command_prefix&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="平台适配器" tabindex="-1">平台适配器 <a class="header-anchor" href="#平台适配器" aria-label="Permalink to &quot;平台适配器&quot;">​</a></h2><h3 id="开发适配器" tabindex="-1">开发适配器 <a class="header-anchor" href="#开发适配器" aria-label="Permalink to &quot;开发适配器&quot;">​</a></h3><p>如果你需要对接新的平台，可以开发自定义平台适配器。</p><p>参考 <a href="./platforms/qq.html">QQ 平台适配器</a> 的实现。</p><h3 id="平台-api" tabindex="-1">平台 API <a class="header-anchor" href="#平台-api" aria-label="Permalink to &quot;平台 API&quot;">​</a></h3><p>每个平台适配器需要实现以下方法：</p><ul><li><code>connect()</code> - 连接到平台</li><li><code>send_message()</code> - 发送消息</li><li><code>disconnect()</code> - 断开连接</li><li><code>get_stats()</code> - 获取统计信息</li></ul><h2 id="统一消息模型" tabindex="-1">统一消息模型 <a class="header-anchor" href="#统一消息模型" aria-label="Permalink to &quot;统一消息模型&quot;">​</a></h2><p>NekoBot 使用统一的消息模型处理不同平台的差异：</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;message_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12345</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;group_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">67890</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;user_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">54321</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;sender_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;用户昵称&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;message_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;group&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># group 或 private</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;消息内容&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;platform_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;aiocqhttp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;raw_message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 原始消息</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;timestamp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1234567890</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="消息处理流程" tabindex="-1">消息处理流程 <a class="header-anchor" href="#消息处理流程" aria-label="Permalink to &quot;消息处理流程&quot;">​</a></h2><ol><li>平台接收消息</li><li>转换为统一消息模型</li><li>发送到 NekoBot 事件队列</li><li>分发到插件处理</li><li>转换回平台特定格式发送</li></ol><h2 id="常见问题" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题" aria-label="Permalink to &quot;常见问题&quot;">​</a></h2><h3 id="同时连接多个平台" tabindex="-1">同时连接多个平台 <a class="header-anchor" href="#同时连接多个平台" aria-label="Permalink to &quot;同时连接多个平台&quot;">​</a></h3><p>NekoBot 支持同时连接多个平台，在配置文件中添加多个平台即可。</p><h3 id="消息转发" tabindex="-1">消息转发 <a class="header-anchor" href="#消息转发" aria-label="Permalink to &quot;消息转发&quot;">​</a></h3><p>通过插件可以实现跨平台消息转发。</p><h3 id="平台限制" tabindex="-1">平台限制 <a class="header-anchor" href="#平台限制" aria-label="Permalink to &quot;平台限制&quot;">​</a></h3><p>不同平台有不同的 API 限制，请参考对应平台的文档。</p>`,33)])])}const u=a(h,[["render",n]]);export{E as __pageData,u as default};
