import{_ as a,c as d,o as s,az as i}from"./chunks/framework.OpiqYVxT.js";const k=JSON.parse('{"title":"API 概览","description":"","frontmatter":{},"headers":[],"relativePath":"api/overview.md","filePath":"api/overview.md","lastUpdated":1767020854000}'),e={name:"api/overview.md"};function h(n,t,l,o,r,p){return s(),d("div",null,[...t[0]||(t[0]=[i(`<h1 id="api-概览" tabindex="-1">API 概览 <a class="header-anchor" href="#api-概览" aria-label="Permalink to &quot;API 概览&quot;">​</a></h1><p>NekoBot 提供了完整的 RESTful API 和 WebSocket API，用于与后端服务进行交互。</p><h2 id="基础信息" tabindex="-1">基础信息 <a class="header-anchor" href="#基础信息" aria-label="Permalink to &quot;基础信息&quot;">​</a></h2><ul><li><strong>基础 URL</strong>: <code>http://localhost:6285/api</code></li><li><strong>认证方式</strong>: JWT Bearer Token</li><li><strong>内容类型</strong>: <code>application/json</code></li></ul><h2 id="认证" tabindex="-1">认证 <a class="header-anchor" href="#认证" aria-label="Permalink to &quot;认证&quot;">​</a></h2><p>所有需要认证的 API 都需要在请求头中携带 JWT Token：</p><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Authorization</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Bearer &lt;your_token&gt;</span></span></code></pre></div><p>获取 Token：</p><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">POST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /api/login</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Content-Type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> application/json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;username&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;nekobot&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;password&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;nekobot&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>响应：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;access_token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;eyJhbGciOiJIUzI1NiIs...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;token_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bearer&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="api-端点" tabindex="-1">API 端点 <a class="header-anchor" href="#api-端点" aria-label="Permalink to &quot;API 端点&quot;">​</a></h2><h3 id="认证相关" tabindex="-1">认证相关 <a class="header-anchor" href="#认证相关" aria-label="Permalink to &quot;认证相关&quot;">​</a></h3><table tabindex="0"><thead><tr><th>端点</th><th>方法</th><th>描述</th><th>认证</th></tr></thead><tbody><tr><td><code>/api/login</code></td><td>POST</td><td>用户登录</td><td>否</td></tr><tr><td><code>/api/logout</code></td><td>POST</td><td>用户登出</td><td>是</td></tr></tbody></table><h3 id="机器人配置" tabindex="-1">机器人配置 <a class="header-anchor" href="#机器人配置" aria-label="Permalink to &quot;机器人配置&quot;">​</a></h3><table tabindex="0"><thead><tr><th>端点</th><th>方法</th><th>描述</th><th>认证</th></tr></thead><tbody><tr><td><code>/api/bot/config</code></td><td>GET</td><td>获取配置</td><td>是</td></tr><tr><td><code>/api/bot/config</code></td><td>PUT</td><td>更新配置</td><td>是</td></tr></tbody></table><h3 id="插件管理" tabindex="-1">插件管理 <a class="header-anchor" href="#插件管理" aria-label="Permalink to &quot;插件管理&quot;">​</a></h3><table tabindex="0"><thead><tr><th>端点</th><th>方法</th><th>描述</th><th>认证</th></tr></thead><tbody><tr><td><code>/api/plugins</code></td><td>GET</td><td>获取插件列表</td><td>是</td></tr><tr><td><code>/api/plugins/enable</code></td><td>POST</td><td>启用插件</td><td>否</td></tr><tr><td><code>/api/plugins/disable</code></td><td>POST</td><td>禁用插件</td><td>否</td></tr><tr><td><code>/api/plugins/reload</code></td><td>POST</td><td>重载插件</td><td>否</td></tr><tr><td><code>/api/plugins/upload</code></td><td>POST</td><td>上传插件</td><td>否</td></tr><tr><td><code>/api/plugins/delete</code></td><td>DELETE</td><td>删除插件</td><td>否</td></tr><tr><td><code>/api/plugins/config</code></td><td>GET</td><td>获取插件配置</td><td>是</td></tr><tr><td><code>/api/plugins/config</code></td><td>PUT</td><td>更新插件配置</td><td>是</td></tr></tbody></table><h3 id="平台管理" tabindex="-1">平台管理 <a class="header-anchor" href="#平台管理" aria-label="Permalink to &quot;平台管理&quot;">​</a></h3><table tabindex="0"><thead><tr><th>端点</th><th>方法</th><th>描述</th><th>认证</th></tr></thead><tbody><tr><td><code>/api/platforms</code></td><td>GET</td><td>获取平台列表</td><td>是</td></tr><tr><td><code>/api/platforms</code></td><td>POST</td><td>添加平台</td><td>是</td></tr><tr><td><code>/api/platforms/&lt;id&gt;</code></td><td>DELETE</td><td>删除平台</td><td>是</td></tr><tr><td><code>/api/platform/stats</code></td><td>GET</td><td>获取平台统计</td><td>否</td></tr></tbody></table><h3 id="llm-管理" tabindex="-1">LLM 管理 <a class="header-anchor" href="#llm-管理" aria-label="Permalink to &quot;LLM 管理&quot;">​</a></h3><table tabindex="0"><thead><tr><th>端点</th><th>方法</th><th>描述</th><th>认证</th></tr></thead><tbody><tr><td><code>/api/llm/providers</code></td><td>GET</td><td>获取 LLM 提供商列表</td><td>是</td></tr><tr><td><code>/api/llm/providers</code></td><td>POST</td><td>添加 LLM 提供商</td><td>是</td></tr><tr><td><code>/api/llm/providers/&lt;id&gt;</code></td><td>DELETE</td><td>删除 LLM 提供商</td><td>是</td></tr><tr><td><code>/api/llm/chat</code></td><td>POST</td><td>发送聊天请求</td><td>否</td></tr></tbody></table><h3 id="人格管理" tabindex="-1">人格管理 <a class="header-anchor" href="#人格管理" aria-label="Permalink to &quot;人格管理&quot;">​</a></h3><table tabindex="0"><thead><tr><th>端点</th><th>方法</th><th>描述</th><th>认证</th></tr></thead><tbody><tr><td><code>/api/personalities</code></td><td>GET</td><td>获取人格列表</td><td>是</td></tr><tr><td><code>/api/personalities</code></td><td>POST</td><td>创建人格</td><td>是</td></tr><tr><td><code>/api/personalities/&lt;id&gt;</code></td><td>DELETE</td><td>删除人格</td><td>是</td></tr><tr><td><code>/api/personalities/default</code></td><td>PUT</td><td>设置默认人格</td><td>是</td></tr></tbody></table><h3 id="命令管理" tabindex="-1">命令管理 <a class="header-anchor" href="#命令管理" aria-label="Permalink to &quot;命令管理&quot;">​</a></h3><table tabindex="0"><thead><tr><th>端点</th><th>方法</th><th>描述</th><th>认证</th></tr></thead><tbody><tr><td><code>/api/commands</code></td><td>GET</td><td>获取所有命令</td><td>否</td></tr><tr><td><code>/api/commands/conflicts</code></td><td>GET</td><td>检查命令冲突</td><td>否</td></tr></tbody></table><h3 id="日志管理" tabindex="-1">日志管理 <a class="header-anchor" href="#日志管理" aria-label="Permalink to &quot;日志管理&quot;">​</a></h3><table tabindex="0"><thead><tr><th>端点</th><th>方法</th><th>描述</th><th>认证</th></tr></thead><tbody><tr><td><code>/api/logs</code></td><td>GET</td><td>获取日志</td><td>是</td></tr></tbody></table><h3 id="mcp-管理" tabindex="-1">MCP 管理 <a class="header-anchor" href="#mcp-管理" aria-label="Permalink to &quot;MCP 管理&quot;">​</a></h3><table tabindex="0"><thead><tr><th>端点</th><th>方法</th><th>描述</th><th>认证</th></tr></thead><tbody><tr><td><code>/api/mcp/servers</code></td><td>GET</td><td>获取 MCP 服务器列表</td><td>是</td></tr><tr><td><code>/api/mcp/servers</code></td><td>POST</td><td>添加 MCP 服务器</td><td>是</td></tr><tr><td><code>/api/mcp/servers/&lt;id&gt;</code></td><td>DELETE</td><td>删除 MCP 服务器</td><td>是</td></tr></tbody></table><h3 id="设置管理" tabindex="-1">设置管理 <a class="header-anchor" href="#设置管理" aria-label="Permalink to &quot;设置管理&quot;">​</a></h3><table tabindex="0"><thead><tr><th>端点</th><th>方法</th><th>描述</th><th>认证</th></tr></thead><tbody><tr><td><code>/api/settings</code></td><td>GET</td><td>获取设置</td><td>是</td></tr><tr><td><code>/api/settings</code></td><td>PUT</td><td>更新设置</td><td>是</td></tr></tbody></table><h3 id="聊天相关" tabindex="-1">聊天相关 <a class="header-anchor" href="#聊天相关" aria-label="Permalink to &quot;聊天相关&quot;">​</a></h3><table tabindex="0"><thead><tr><th>端点</th><th>方法</th><th>描述</th><th>认证</th></tr></thead><tbody><tr><td><code>/chat/send</code></td><td>POST</td><td>发送聊天消息</td><td>否</td></tr><tr><td><code>/chat/new_session</code></td><td>POST</td><td>创建新会话</td><td>否</td></tr><tr><td><code>/chat/sessions</code></td><td>GET</td><td>获取会话列表</td><td>否</td></tr><tr><td><code>/chat/get_session</code></td><td>GET</td><td>获取会话详情</td><td>否</td></tr><tr><td><code>/chat/delete_session</code></td><td>DELETE</td><td>删除会话</td><td>否</td></tr></tbody></table><h2 id="websocket-api" tabindex="-1">WebSocket API <a class="header-anchor" href="#websocket-api" aria-label="Permalink to &quot;WebSocket API&quot;">​</a></h2><h3 id="连接-websocket" tabindex="-1">连接 WebSocket <a class="header-anchor" href="#连接-websocket" aria-label="Permalink to &quot;连接 WebSocket&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ws</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WebSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ws://localhost:6285/ws&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="订阅频道" tabindex="-1">订阅频道 <a class="header-anchor" href="#订阅频道" aria-label="Permalink to &quot;订阅频道&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ws.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  action: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;subscribe&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  channels: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;logs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;events&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}));</span></span></code></pre></div><h3 id="可用频道" tabindex="-1">可用频道 <a class="header-anchor" href="#可用频道" aria-label="Permalink to &quot;可用频道&quot;">​</a></h3><table tabindex="0"><thead><tr><th>频道</th><th>描述</th></tr></thead><tbody><tr><td><code>logs</code></td><td>实时日志</td></tr><tr><td><code>events</code></td><td>事件通知</td></tr></tbody></table><h2 id="响应格式" tabindex="-1">响应格式 <a class="header-anchor" href="#响应格式" aria-label="Permalink to &quot;响应格式&quot;">​</a></h2><h3 id="成功响应" tabindex="-1">成功响应 <a class="header-anchor" href="#成功响应" aria-label="Permalink to &quot;成功响应&quot;">​</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="错误响应" tabindex="-1">错误响应 <a class="header-anchor" href="#错误响应" aria-label="Permalink to &quot;错误响应&quot;">​</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;错误描述&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="错误码" tabindex="-1">错误码 <a class="header-anchor" href="#错误码" aria-label="Permalink to &quot;错误码&quot;">​</a></h2><table tabindex="0"><thead><tr><th>状态码</th><th>描述</th></tr></thead><tbody><tr><td>200</td><td>成功</td></tr><tr><td>400</td><td>请求参数错误</td></tr><tr><td>401</td><td>未授权</td></tr><tr><td>403</td><td>禁止访问</td></tr><tr><td>404</td><td>资源不存在</td></tr><tr><td>500</td><td>服务器错误</td></tr></tbody></table><h2 id="速率限制" tabindex="-1">速率限制 <a class="header-anchor" href="#速率限制" aria-label="Permalink to &quot;速率限制&quot;">​</a></h2><p>某些 API 可能有速率限制，请在响应头中查看：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>X-RateLimit-Limit: 100</span></span>
<span class="line"><span>X-RateLimit-Remaining: 99</span></span>
<span class="line"><span>X-RateLimit-Reset: 1234567890</span></span></code></pre></div><h2 id="通用参数" tabindex="-1">通用参数 <a class="header-anchor" href="#通用参数" aria-label="Permalink to &quot;通用参数&quot;">​</a></h2><h3 id="分页参数" tabindex="-1">分页参数 <a class="header-anchor" href="#分页参数" aria-label="Permalink to &quot;分页参数&quot;">​</a></h3><p>对于返回列表的 API，可以使用以下分页参数：</p><table tabindex="0"><thead><tr><th>参数</th><th>类型</th><th>默认值</th><th>描述</th></tr></thead><tbody><tr><td><code>page</code></td><td>integer</td><td>1</td><td>页码</td></tr><tr><td><code>page_size</code></td><td>integer</td><td>20</td><td>每页数量</td></tr></tbody></table><h3 id="排序参数" tabindex="-1">排序参数 <a class="header-anchor" href="#排序参数" aria-label="Permalink to &quot;排序参数&quot;">​</a></h3><table tabindex="0"><thead><tr><th>参数</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td><code>sort_by</code></td><td>string</td><td>排序字段</td></tr><tr><td><code>order</code></td><td>string</td><td>排序方向：<code>asc</code> 或 <code>desc</code></td></tr></tbody></table><h2 id="最佳实践" tabindex="-1">最佳实践 <a class="header-anchor" href="#最佳实践" aria-label="Permalink to &quot;最佳实践&quot;">​</a></h2><ol><li><strong>错误处理</strong>: 始终检查响应中的 <code>status</code> 字段</li><li><strong>Token 管理</strong>: 妥善保管 JWT Token，及时刷新</li><li><strong>并发控制</strong>: 遵守速率限制，避免过多并发请求</li><li><strong>缓存</strong>: 对频繁访问的数据使用缓存</li><li><strong>HTTPS</strong>: 生产环境使用 HTTPS 保护数据传输</li></ol>`,59)])])}const b=a(e,[["render",h]]);export{k as __pageData,b as default};
